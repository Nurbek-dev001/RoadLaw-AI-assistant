# ðŸš€ Deployment Guide - ÐŸÐ”Ð” AI ÐšÐ°Ð·Ð°Ñ…ÑÑ‚Ð°Ð½

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Browser                              â”‚
â”‚              (Ð»ÑŽÐ±Ð¾Ð¹ ÐºÐ»Ð¸ÐµÐ½Ñ‚, Ð»ÑŽÐ±Ð¾Ð¹ Ð³Ð¾Ñ€Ð¾Ð´)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Streamlit      â”‚              â”‚ FastAPI Backend  â”‚
â”‚ Frontend       â”‚              â”‚                  â”‚
â”‚ (Streamlit     â”‚              â”‚ â€¢ RAG Pipeline   â”‚
â”‚  Cloud)        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â€¢ Vector DB      â”‚
â”‚                â”‚ HTTP POST  â”‚ â”‚ â€¢ OpenAI API    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ /ask       â”‚ â”‚                  â”‚
                   â”‚          â””â”€â”¤ (Render)         â”‚
                   â”‚            â”‚                  â”‚
                   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â””â”€â–º OpenAI API (gpt-3.5-turbo)
```

---

## Part 1: Backend Ð½Ð° Render

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ
- GitHub Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚
- Render Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚ ([render.com](https://render.com))
- OpenAI API ÐºÐ»ÑŽÑ‡

### Ð¨Ð°Ð³Ð¸

#### 1. ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÑŒÑ‚Ðµ GitHub Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹

```bash
git init
git add .
git commit -m "Initial commit: PDD AI Kazakhstan MVP"
git branch -M main
git remote add origin https://github.com/YOUR_USERNAME/pdd-ai-kz.git
git push -u origin main
```

#### 2. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Render Web Service

1. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð½Ð° [render.com/dashboard](https://render.com/dashboard)
2. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "New +" â†’ "Web Service"
3. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ GitHub Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹
4. Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ñ„Ð¾Ñ€Ð¼Ñƒ:

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|----------|----------|
| **Name** | `pdd-ai-backend` |
| **Environment** | Python 3.11 |
| **Build Command** | `pip install -r requirements.txt && python backend/prepare_data.py` |
| **Start Command** | `python backend/main.py` |
| **Plan** | Free (Ð¸Ð»Ð¸ Starter Ð´Ð»Ñ Ð»ÑƒÑ‡ÑˆÐµÐ¹ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸) |

#### 3. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

Ð’ Render Dashboard â†’ Settings â†’ Environment:

```
OPENAI_API_KEY = sk-your-actual-key-here
LOG_LEVEL = INFO
```

#### 4. Ð”ÐµÐ¿Ð»Ð¾Ð¹

ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Create Web Service" Ð¸ Ð¶Ð´Ð¸Ñ‚Ðµ ~10 Ð¼Ð¸Ð½ÑƒÑ‚ Ð¿Ð¾ÐºÐ° Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑÑ.

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Backend Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð½Ð°:
```
https://pdd-ai-backend.onrender.com
```

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°

```bash
curl https://pdd-ai-backend.onrender.com/health
```

Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ:
```json
{
  "status": "healthy",
  "database": "connected",
  "documents": 10
}
```

---

## Part 2: Frontend Ð½Ð° Streamlit Cloud

### Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ
- GitHub Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚ Ñ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÐµÐ¼ (Ð¸Ð· Part 1)
- Streamlit Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚

### Ð¨Ð°Ð³Ð¸

#### 1. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ `streamlit/config.toml`

```bash
mkdir -p .streamlit
cat > .streamlit/config.toml << 'EOF'
[logger]
level = "info"

[client]
showErrorDetails = true
toolbarMode = "developer"

[server]
port = 8501
enableXsrfProtection = true
maxUploadSize = 200
EOF
```

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² git:
```bash
git add .streamlit/config.toml
git commit -m "Add Streamlit config"
git push
```

#### 2. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Streamlit Cloud Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ

1. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð½Ð° [share.streamlit.io](https://share.streamlit.io)
2. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "New app"
3. Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|----------|----------|
| **Repository** | Ð²Ð°Ñˆ GitHub Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ |
| **Branch** | main |
| **File path** | frontend/app.py |

#### 3. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

Ð’ Streamlit Cloud â†’ Settings â†’ Secrets:

```toml
backend_url = "https://pdd-ai-backend.onrender.com"
```

#### 4. Ð’ÐµÑ€Ð½Ð¸Ñ‚ÐµÑÑŒ Ð½Ð° Ð³Ð»Ð°Ð²Ð½ÑƒÑŽ ÑÐ²Ð¾ÑŽ Ð² Settings

ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Deploy" Ð¸ Ð¶Ð´Ð¸Ñ‚Ðµ ~5 Ð¼Ð¸Ð½ÑƒÑ‚.

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Frontend Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð½Ð°:
```
https://pdd-ai-kz.streamlit.app
```

---

## Part 3: Production Checklist

### Security

- [ ] Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ OPENAI_API_KEY Ð¾Ñ‚ Ð»Ð¾Ð³Ð¾Ð²
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ rate limiting Ð½Ð° API
- [ ] Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ CORS Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð½ÑƒÐ¶Ð½Ñ‹Ñ… Ð´Ð¾Ð¼ÐµÐ½Ð¾Ð²
- [ ] Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ HTTPS Ð²ÐµÐ·Ð´Ðµ

### Performance

- [ ] ÐšÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÐµÐºÑ‚Ð¾Ñ€ Ð¿Ð¾Ð¸ÑÐº
- [ ] Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ CDN Ð´Ð»Ñ ÑÑ‚Ð°Ñ‚Ð¸ÐºÐ¸ (ÐµÑÐ»Ð¸ Ð±ÑƒÐ´ÐµÑ‚)
- [ ] ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€Ð°Ð·Ð¼ÐµÑ€ Chroma Ð‘Ð”

### Logging & Monitoring

- [ ] ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð² Render
- [ ] Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ñ‚Ñ€ÐµÐºÐµÑ€ (Sentry/LogRocket)
- [ ] ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ OpenAI API

### Data

- [ ] Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ ÐŸÐ”Ð” Ð´Ð°Ð½Ð½Ñ‹Ðµ
- [ ] Ð‘ÑÐºÐ°Ð¿Ð¸Ñ‚ÑŒ Chroma Ð‘Ð”
- [ ] Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ (Ð°Ð½Ð¾Ð½Ð¸Ð¼Ð½Ñ‹Ðµ)

---

## Troubleshooting

### Backend Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð½Ð° Render

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** "Build failed"

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
```bash
# Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python backend/prepare_data.py
```

### Frontend Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº Backend

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** CORS Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** Ð’ `backend/main.py` Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ CORS:
```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # Ð˜Ð»Ð¸ ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ð´Ð¾Ð¼ÐµÐ½
)
```

### OpenAI API Ð¾ÑˆÐ¸Ð±ÐºÐ¸

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** "Invalid API key"

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐºÐ»ÑŽÑ‡: https://platform.openai.com/account/api-keys
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð±Ð°Ð»Ð°Ð½Ñ Ð² OpenAI
3. ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð¾ÑÐ»Ðµ ÑÐ¼ÐµÐ½Ñ‹ ÐºÐ»ÑŽÑ‡Ð°

### ÐœÐµÐ´Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** API Ð´Ð¾Ð»Ð³Ð¾ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**
- Upgrade Ð½Ð° Starter plan Ð² Render (Ð²Ð¼ÐµÑÑ‚Ð¾ Free)
- ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² Ð² RAG
- ÐšÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð´Ð»Ñ Ñ‡Ð°ÑÑ‚Ð¾ Ð·Ð°Ð´Ð°Ð²Ð°ÐµÐ¼Ñ‹Ñ… Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²

---

## Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ

| Ð¡ÐµÑ€Ð²Ð¸Ñ | Free | Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ (Ð¼ÐµÑÑÑ†) |
|--------|------|-------------------|
| Render Backend | âœ… | $0 (ÑÐ¿Ð¸Ñ‚ Ð¿Ñ€Ð¸ Ð½ÐµÐ°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸) |
| Streamlit Cloud | âœ… | $0 |
| OpenAI API | âŒ | $0.002 Ð·Ð° 1000 Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² (~$5-20/Ð¼ÐµÑÑÑ†) |
| **Ð˜Ñ‚Ð¾Ð³Ð¾** | | ~$5-20 |

---

## Scaling Ð´Ð»Ñ Ð±Ð¾Ð»ÑŒÑˆÐµÐ³Ð¾ Ñ‚Ñ€Ð°Ñ„Ð¸ÐºÐ°

### Ð•ÑÐ»Ð¸ Ð¼Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹:

1. **Backend Ð½Ð° Render:**
   - Upgrade Ñ Free Ð½Ð° Starter ($7/Ð¼ÐµÑÑÑ†)
   - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð±Ð¾Ð»ÐµÐµ Ð¼Ð¾Ñ‰Ð½Ñ‹Ð¹ GPU Ð´Ð»Ñ embeddings (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

2. **ÐšÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:**
   - Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Redis Ð´Ð»Ñ ÐºÑÑˆÐ° Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ñ… Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²
   - ÐšÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° ÑƒÑ€Ð¾Ð²Ð½Ðµ Chroma

3. **Load Balancing:**
   - ÐÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¸Ð½ÑÑ‚Ð°Ð½ÑÐ¾Ð² Backend
   - Cloudflare Ð´Ð»Ñ CDN Ð¸ DDoS Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹

---

## Ð”Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐµÐµ

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ Ð´ÐµÐ¿Ð»Ð¾Ñ MVP:

- Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Telegram Ð±Ð¾Ñ‚Ð°
- Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Telegram Ð±Ð¾Ñ‚Ð° Ð´Ð»Ñ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹
- Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÑƒ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²
- ÐžÐ¿Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ Ð´Ð¾Ð¼ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð¼Ñ: https://pdd-ai.kz
- Ð—Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¼Ð¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð² App Store/Play Store

---

**Ð“Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº Ð´ÐµÐ¿Ð»Ð¾ÑŽ! ðŸš€**
